{"version":3,"sources":["services/people.js","App.js","index.js"],"names":["baseUrl","axios","get","then","res","data","newObject","post","id","put","delete","status","Filter","filter","filterChange","value","onChange","PersonForm","name","number","nameHandler","numberHandler","addPerson","onSubmit","type","Persons","people","delPerson","map","person","onClick","indexOf","Notification","message","style","className","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","newMessage","setMessage","success","setSuc","useEffect","peopleService","response","namesToShow","toLowerCase","includes","event","target","preventDefault","newPerson","found","i","length","window","confirm","p","setTimeout","catch","error","JSON","stringify","concat","find","statusCode","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.50091c9b.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((res) => res.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((res) => res.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((res) => res.data);\n};\nconst del=(id)=>{\n    const request= axios.delete(`${baseUrl}/${id}`);\n    return request.then((res)=>res.status);\n}\nexport default {\n  getAll: getAll,\n  create: create,\n  update: update,\n  del:del,\n};\n","import React, { useState, useEffect } from \"react\";\nimport peopleService from \"./services/people\";\n//Components\nconst Filter = ({ filter, filterChange }) => {\n  return (\n    <form>\n      <div>\n        Filter shown with\n        <input value={filter} onChange={filterChange} />\n      </div>\n    </form>\n  );\n};\nconst PersonForm = ({\n  name,\n  number,\n  nameHandler,\n  numberHandler,\n  addPerson,\n}) => {\n  return (\n    <form onSubmit={addPerson}>\n      <div>\n        Name: <input value={name} onChange={nameHandler} />\n      </div>\n      <div>\n        Number: <input value={number} onChange={numberHandler} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\nconst Persons = ({ people, delPerson }) => {\n  return (\n    <ul>\n      {people.map((person) => (\n        <li key={people.indexOf(person)}>\n          {person.name} {person.number}{\" \"}\n          <button onClick={delPerson} value={person.id}>\n            Delete\n          </button>\n        </li>\n      ))}\n    </ul>\n  );\n};\nconst Notification = ({ message,style }) => {\n  if (message !== \"\") {\n    return <div className={style}>{message}</div>;\n  }\n  return <></>\n};\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newFilter, setNewFilter] = useState(\"\");\n  const [newMessage, setMessage] = useState(\"\");\n  const [success,setSuc]=useState(\"\");\n  //Initially load people\n  useEffect(() => {\n    peopleService.getAll().then((response) => {\n      setPersons(response);\n    });\n  }, []);\n  //Function to add people\n  const addPerson = (event) => {\n    event.preventDefault();\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n    };\n    let found = false;\n    let id;\n    for (var i = 0; i < persons.length; i++) {\n      if (persons[i].name === newName) {\n        found = true;\n        id = persons[i].id;\n        break;\n      }\n    }\n    if (!found) {\n      peopleService.create(newPerson).then((res) => {\n        setPersons(persons.concat(res));\n        setSuc(\"success\");\n        setMessage(`The person '${newPerson.name}' was added`)\n        setTimeout(() => {  setMessage(\"\"); }, 3000);\n      })\n      .catch((error) => {\n        setSuc(\"error\");\n        setMessage(JSON.stringify(error.response.data.error));\n        setTimeout(() => {  setMessage(\"\"); }, 3000);\n      });\n    } else {\n      if (\n        window.confirm(\n          `${newPerson.name} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        peopleService\n          .update(id, newPerson)\n          .then((res) => {\n            setPersons(persons.map((p) => (p.id != id ? p : res)));\n            setSuc(\"success\");\n            setMessage(`${newPerson.name} was updated.`)\n            setTimeout(() => {  setMessage(\"\"); }, 3000);\n          })\n          .catch((error) => {\n            setSuc(\"error\");\n            setMessage(JSON.stringify(error.response.data.error));\n            setPersons(persons.filter((p) => p.id != id));\n            setTimeout(() => {  setMessage(\"\"); }, 3000);\n          });\n      }\n    }\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n  //Function to delete people\n  const delPeople = (event) => {\n    const id = event.target.value;\n    const person = persons.find((p) => p.id == id);\n    if (window.confirm(`Delete ${person.name} ?`)) {\n      peopleService\n        .del(id, person)\n        .then((statusCode) => {\n          if (statusCode === 200) {\n            //if I use triple operator !== it doesn't work for some reason.\n            setPersons(persons.filter((p) => p.id != id));\n            setSuc(\"success\");\n            setMessage(`${person.name} was successfully deleted.`);\n            setTimeout(() => {  setMessage(\"\"); }, 3000);\n          } else {\n            setSuc(\"error\");\n            setMessage(`There was a problem in the server`);\n            setTimeout(() => {  setMessage(\"\"); }, 3000);\n          }\n        })\n        .catch((error) => {\n          setSuc(\"error\");\n          setMessage(`The person ${person.name} was already deleted from server`);\n          //if I use triple operator !== it doesn't work for some reason.\n          setPersons(persons.filter((p) => p.id != id));\n          setTimeout(() => {  setMessage(\"\"); }, 3000);\n        });\n    }\n  };\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value);\n  };\n  //Function to handle the input changing\n  const handlePersonChange = (event) => {\n    setNewName(event.target.value);\n  };\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n  const namesToShow = persons.filter((person) =>\n    person.name.toLowerCase().includes(newFilter.toLowerCase())\n  );\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={newMessage} style={success}/>\n      <Filter filter={newFilter} filterChange={handleFilterChange} />\n      <h3>Add a new</h3>\n      <PersonForm\n        name={newName}\n        number={newNumber}\n        nameHandler={handlePersonChange}\n        numberHandler={handleNumberChange}\n        addPerson={addPerson}\n      />\n      <h3>Numbers</h3>\n      <Persons people={namesToShow} delPerson={delPeople} />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from './App'\nimport './index.css'\nReactDOM.render(<App />, document.getElementById(\"root\"));"],"sourceRoot":""}