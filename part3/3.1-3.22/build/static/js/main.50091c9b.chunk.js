(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(14),c=n.n(r),a=n(3),u=n(2),i=n(4),o=n.n(i),s="/api/persons",d=function(){return o.a.get(s).then((function(e){return e.data}))},f=function(e){return o.a.post(s,e).then((function(e){return e.data}))},l=function(e,t){return o.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))},j=function(e){return o.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.status}))},b=n(0),h=function(e){var t=e.filter,n=e.filterChange;return Object(b.jsx)("form",{children:Object(b.jsxs)("div",{children:["Filter shown with",Object(b.jsx)("input",{value:t,onChange:n})]})})},m=function(e){var t=e.name,n=e.number,r=e.nameHandler,c=e.numberHandler,a=e.addPerson;return Object(b.jsxs)("form",{onSubmit:a,children:[Object(b.jsxs)("div",{children:["Name: ",Object(b.jsx)("input",{value:t,onChange:r})]}),Object(b.jsxs)("div",{children:["Number: ",Object(b.jsx)("input",{value:n,onChange:c})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var t=e.people,n=e.delPerson;return Object(b.jsx)("ul",{children:t.map((function(e){return Object(b.jsxs)("li",{children:[e.name," ",e.number," ",Object(b.jsx)("button",{onClick:n,value:e.id,children:"Delete"})]},t.indexOf(e))}))})},p=function(e){var t=e.message,n=e.style;return""!==t?Object(b.jsx)("div",{className:n,children:t}):Object(b.jsx)(b.Fragment,{})},v=function(){var e=Object(u.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],c=Object(u.useState)(""),i=Object(a.a)(c,2),o=i[0],s=i[1],v=Object(u.useState)(""),x=Object(a.a)(v,2),w=x[0],g=x[1],T=Object(u.useState)(""),y=Object(a.a)(T,2),S=y[0],C=y[1],k=Object(u.useState)(""),N=Object(a.a)(k,2),P=N[0],H=N[1],J=Object(u.useState)(""),D=Object(a.a)(J,2),E=D[0],F=D[1];Object(u.useEffect)((function(){d().then((function(e){r(e)}))}),[]);var L=n.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())}));return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(p,{message:P,style:E}),Object(b.jsx)(h,{filter:S,filterChange:function(e){C(e.target.value)}}),Object(b.jsx)("h3",{children:"Add a new"}),Object(b.jsx)(m,{name:o,number:w,nameHandler:function(e){s(e.target.value)},numberHandler:function(e){g(e.target.value)},addPerson:function(e){e.preventDefault();for(var t,c={name:o,number:w},a=!1,u=0;u<n.length;u++)if(n[u].name===o){a=!0,t=n[u].id;break}a?window.confirm("".concat(c.name," is already added to phonebook, replace the old number with a new one?"))&&l(t,c).then((function(e){r(n.map((function(n){return n.id!=t?n:e}))),F("success"),H("".concat(c.name," was updated.")),setTimeout((function(){H("")}),3e3)})).catch((function(e){F("error"),H(JSON.stringify(e.response.data.error)),r(n.filter((function(e){return e.id!=t}))),setTimeout((function(){H("")}),3e3)})):f(c).then((function(e){r(n.concat(e)),F("success"),H("The person '".concat(c.name,"' was added")),setTimeout((function(){H("")}),3e3)})).catch((function(e){F("error"),H(JSON.stringify(e.response.data.error)),setTimeout((function(){H("")}),3e3)})),s(""),g("")}}),Object(b.jsx)("h3",{children:"Numbers"}),Object(b.jsx)(O,{people:L,delPerson:function(e){var t=e.target.value,c=n.find((function(e){return e.id==t}));window.confirm("Delete ".concat(c.name," ?"))&&j(t,c).then((function(e){200===e?(r(n.filter((function(e){return e.id!=t}))),F("success"),H("".concat(c.name," was successfully deleted.")),setTimeout((function(){H("")}),3e3)):(F("error"),H("There was a problem in the server"),setTimeout((function(){H("")}),3e3))})).catch((function(e){F("error"),H("The person ".concat(c.name," was already deleted from server")),r(n.filter((function(e){return e.id!=t}))),setTimeout((function(){H("")}),3e3)}))}})]})};n(38);c.a.render(Object(b.jsx)(v,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.50091c9b.chunk.js.map